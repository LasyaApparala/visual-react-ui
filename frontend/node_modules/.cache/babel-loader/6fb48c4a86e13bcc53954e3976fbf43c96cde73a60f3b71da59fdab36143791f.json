{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{taskAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AddTask=_ref=>{let{user}=_ref;const navigate=useNavigate();const[taskData,setTaskData]=useState({title:'',description:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState(false);const handleChange=e=>{const{name,value}=e.target;setTaskData(prev=>({...prev,[name]:value}));if(error)setError('');};const handleSubmit=async e=>{e.preventDefault();if(!taskData.title.trim()){setError('Task title is required');return;}setLoading(true);setError('');try{const response=await taskAPI.createTask({title:taskData.title.trim(),description:taskData.description.trim(),status:'pending',user:user._id// Add this line to include user ID\n});if(response.status===201){setSuccess(true);setTaskData({title:'',description:''});setTimeout(()=>navigate('/view-tasks'),1500);}}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to create task');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"add-task-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"back-btn\",onClick:()=>navigate('/welcome'),disabled:loading,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\"Back to Dashboard\"]}),/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"}),\"Add New Task\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-task-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"user-info\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Creating task for: \",/*#__PURE__*/_jsx(\"strong\",{children:user===null||user===void 0?void 0:user.username})]})})}),success&&/*#__PURE__*/_jsxs(\"div\",{className:\"success-message\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle\"}),\"Task created successfully! Redirecting...\"]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle\"}),error]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"task-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-heading\"}),\"Task Title *\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",placeholder:\"Enter task title...\",value:taskData.title,onChange:handleChange,maxLength:100,required:true,disabled:loading}),/*#__PURE__*/_jsxs(\"small\",{children:[taskData.title.length,\"/100 characters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"description\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-align-left\"}),\"Task Description\"]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",placeholder:\"Describe your task in detail...\",value:taskData.description,onChange:handleChange,maxLength:500,rows:6,disabled:loading}),/*#__PURE__*/_jsxs(\"small\",{children:[taskData.description.length,\"/500 characters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn secondary\",onClick:()=>navigate('/welcome'),disabled:loading,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"}),\"Cancel\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn primary\",disabled:loading||!taskData.title.trim(),children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\"}),\"Creating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\"Add Task\"]})})]})]})]})]});};export default AddTask;","map":{"version":3,"names":["React","useState","useNavigate","taskAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddTask","_ref","user","navigate","taskData","setTaskData","title","description","loading","setLoading","error","setError","success","setSuccess","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","trim","response","createTask","status","_id","setTimeout","_error$response","_error$response$data","data","message","className","children","onClick","disabled","username","onSubmit","htmlFor","type","id","placeholder","onChange","maxLength","required","length","rows"],"sources":["C:/Users/lasya/Videos/visual-react-ui/frontend/src/components/AddTask.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { taskAPI } from '../services/api';\r\n\r\nconst AddTask = ({ user }) => {\r\n  const navigate = useNavigate();\r\n  const [taskData, setTaskData] = useState({\r\n    title: '',\r\n    description: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setTaskData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    if (error) setError('');\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  \r\n  if (!taskData.title.trim()) {\r\n    setError('Task title is required');\r\n    return;\r\n  }\r\n\r\n  setLoading(true);\r\n  setError('');\r\n\r\n  try {\r\n    const response = await taskAPI.createTask({\r\n      title: taskData.title.trim(),\r\n      description: taskData.description.trim(),\r\n      status: 'pending',\r\n      user: user._id // Add this line to include user ID\r\n    });\r\n\r\n    if (response.status === 201) {\r\n      setSuccess(true);\r\n      setTaskData({ title: '', description: '' });\r\n      setTimeout(() => navigate('/view-tasks'), 1500);\r\n    }\r\n  } catch (error) {\r\n    setError(error.response?.data?.message || 'Failed to create task');\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n  return (\r\n    <div className=\"add-task-container\">\r\n      <div className=\"page-header\">\r\n        <button \r\n          className=\"back-btn\" \r\n          onClick={() => navigate('/welcome')}\r\n          disabled={loading}\r\n        >\r\n          <i className=\"fas fa-arrow-left\"></i>\r\n          Back to Dashboard\r\n        </button>\r\n        <h1>\r\n          <i className=\"fas fa-plus-circle\"></i>\r\n          Add New Task\r\n        </h1>\r\n      </div>\r\n\r\n      <div className=\"add-task-card\">\r\n        <div className=\"card-header\">\r\n          <div className=\"user-info\">\r\n            <span>Creating task for: <strong>{user?.username}</strong></span>\r\n          </div>\r\n        </div>\r\n\r\n        {success && (\r\n          <div className=\"success-message\">\r\n            <i className=\"fas fa-check-circle\"></i>\r\n            Task created successfully! Redirecting...\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"error-message\">\r\n            <i className=\"fas fa-exclamation-circle\"></i>\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"task-form\">\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"title\">\r\n              <i className=\"fas fa-heading\"></i>\r\n              Task Title *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"title\"\r\n              name=\"title\"\r\n              placeholder=\"Enter task title...\"\r\n              value={taskData.title}\r\n              onChange={handleChange}\r\n              maxLength={100}\r\n              required\r\n              disabled={loading}\r\n            />\r\n            <small>{taskData.title.length}/100 characters</small>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"description\">\r\n              <i className=\"fas fa-align-left\"></i>\r\n              Task Description\r\n            </label>\r\n            <textarea\r\n              id=\"description\"\r\n              name=\"description\"\r\n              placeholder=\"Describe your task in detail...\"\r\n              value={taskData.description}\r\n              onChange={handleChange}\r\n              maxLength={500}\r\n              rows={6}\r\n              disabled={loading}\r\n            ></textarea>\r\n            <small>{taskData.description.length}/500 characters</small>\r\n          </div>\r\n\r\n          <div className=\"form-actions\">\r\n            <button \r\n              type=\"button\" \r\n              className=\"btn secondary\"\r\n              onClick={() => navigate('/welcome')}\r\n              disabled={loading}\r\n            >\r\n              <i className=\"fas fa-times\"></i>\r\n              Cancel\r\n            </button>\r\n            <button \r\n              type=\"submit\" \r\n              className=\"btn primary\"\r\n              disabled={loading || !taskData.title.trim()}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i>\r\n                  Creating...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <i className=\"fas fa-plus\"></i>\r\n                  Add Task\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddTask;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Login from'./components/Login';import Welcome from'./components/Welcome';import AddTask from'./components/AddTask';import ViewTasks from'./components/ViewTasks';import'./styles/App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const token=localStorage.getItem('token');if(token){// Verify token validity\nfetch('/api/auth/me',{headers:{'Authorization':`Bearer ${token}`}}).then(res=>res.json()).then(data=>{if(data.user){setUser(data.user);setIsAuthenticated(true);}else{localStorage.removeItem('token');}}).catch(()=>{localStorage.removeItem('token');}).finally(()=>{setLoading(false);});}else{setLoading(false);}},[]);const handleLogin=userData=>{setUser(userData);setIsAuthenticated(true);};const handleLogout=()=>{localStorage.removeItem('token');setUser(null);setIsAuthenticated(false);};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!isAuthenticated?/*#__PURE__*/_jsx(Login,{onLogin:handleLogin}):/*#__PURE__*/_jsx(Navigate,{to:\"/welcome\"})}),/*#__PURE__*/_jsx(Route,{path:\"/welcome\",element:isAuthenticated?/*#__PURE__*/_jsx(Welcome,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/add-task\",element:isAuthenticated?/*#__PURE__*/_jsx(AddTask,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/view-tasks\",element:isAuthenticated?/*#__PURE__*/_jsx(ViewTasks,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:isAuthenticated?\"/welcome\":\"/login\"})})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Login","Welcome","AddTask","ViewTasks","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","user","setUser","loading","setLoading","token","localStorage","getItem","fetch","headers","then","res","json","data","removeItem","catch","finally","handleLogin","userData","handleLogout","className","children","path","element","onLogin","to","onLogout"],"sources":["C:/Users/lasya/Videos/visual-react-ui/frontend/src/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport Login from './components/Login';\r\nimport Welcome from './components/Welcome';\r\nimport AddTask from './components/AddTask';\r\nimport ViewTasks from './components/ViewTasks';\r\nimport './styles/App.css';\r\n\r\nfunction App() {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      // Verify token validity\r\n      fetch('/api/auth/me', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data.user) {\r\n          setUser(data.user);\r\n          setIsAuthenticated(true);\r\n        } else {\r\n          localStorage.removeItem('token');\r\n        }\r\n      })\r\n      .catch(() => {\r\n        localStorage.removeItem('token');\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleLogin = (userData) => {\r\n    setUser(userData);\r\n    setIsAuthenticated(true);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    setUser(null);\r\n    setIsAuthenticated(false);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Routes>\r\n          <Route \r\n            path=\"/login\" \r\n            element={\r\n              !isAuthenticated ? \r\n                <Login onLogin={handleLogin} /> : \r\n                <Navigate to=\"/welcome\" />\r\n            } \r\n          />\r\n          <Route \r\n            path=\"/welcome\" \r\n            element={\r\n              isAuthenticated ? \r\n                <Welcome user={user} onLogout={handleLogout} /> : \r\n                <Navigate to=\"/login\" />\r\n            } \r\n          />\r\n          <Route \r\n            path=\"/add-task\" \r\n            element={\r\n              isAuthenticated ? \r\n                <AddTask user={user} /> : \r\n                <Navigate to=\"/login\" />\r\n            } \r\n          />\r\n          <Route \r\n            path=\"/view-tasks\" \r\n            element={\r\n              isAuthenticated ? \r\n                <ViewTasks user={user} /> : \r\n                <Navigate to=\"/login\" />\r\n            } \r\n          />\r\n          <Route \r\n            path=\"/\" \r\n            element={\r\n              <Navigate to={isAuthenticated ? \"/welcome\" : \"/login\"} />\r\n            } \r\n          />\r\n        </Routes>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}